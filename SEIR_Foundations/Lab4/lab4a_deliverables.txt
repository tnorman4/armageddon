Lab 4A â€” Japan Medical
AWS â†” GCP Secure Connectivity (IPSec VPN + BGP)

ğŸ¯ Lab Objective
In this lab, you will design and validate secure, compliant connectivity between:
    AWS Tokyo (ap-northeast-1) â€” authoritative data region
    GCP Iowa (us-central1) â€” New York branch compute (GCP side)

using:
    IPSec VPN
    BGP for dynamic routing
    No databases outside Japan
    Strict process discipline

This lab focuses on how regulated organizations connect clouds safely, not on â€œfastest possible networking.â€

ğŸ§  Why This Lab Exists (Reality Check)
In real enterprises:
    Not all branches use the same cloud
    Not all teams report to the same platform group
    Legal obligations override technical preference
    Connectivity requires coordination, not heroics

This lab simulates a real multi-team, multi-provider connection where mistakes have consequences.

ğŸŒ Architecture Overview
Regions
    AWS: Tokyo (ap-northeast-1)
    GCP: Iowa (us-central1)

Roles
  AWS Tokyo
    RDS (PHI lives here only)
    Transit Gateway (hub)
    VPN termination (TGW VPN attachment)

  GCP Iowa
    VMs only (no databases)
    Network Connectivity Center (NCC)
    Cloud VPN (HA VPN)
    Cloud Router (BGP)

ğŸ”— Connectivity Model
Technology Used
    IPSec VPN (site-to-site)
    BGP for dynamic route exchange
    Private IP routing only
    Encrypted in transit

BGP Link-Local Ranges (Given)
You must use the following BGP IP ranges:
  169.254.12.0/30
  169.254.12.4/30

These are link-local and used only inside the tunnel.

ğŸ” Security & Compliance Constraints (Non-Negotiable)
    No PHI stored in GCP
    No databases in GCP
    No disk persistence of medical data
    No logging of PHI
    All traffic encrypted
    All routing explicit and auditable

If a solution â€œworksâ€ but violates these rules, it fails the lab.

ğŸ§© What Each Side Is Responsible For
AWS Tokyo Team (You)
    Create Transit Gateway VPN attachment
    Configure BGP ASN and peers
    Advertise only Tokyo VPC CIDR
    Accept routes from GCP
    Ensure return routing is correct
    Keep PHI inside Japan

GCP Iowa Team (You)
    Create HA VPN gateway
    Create Cloud Router (BGP enabled)
    Integrate with Network Connectivity Center
    Configure BGP peers with AWS
    Advertise only GCP VPC CIDR
    Ensure no data persistence

ğŸ”‘ Process Reminder: Pre-Shared Keys (PSKs)
This Is Important
In real environments:
    --> Pre-Shared Keys are never sent over chat, screenshots, or tickets.

For this lab:
    Each VPN tunnel uses a PSK
    PSKs must be:
      Generated securely
      Stored temporarily
      Shared out-of-band

Acceptable Methods (Lab Simulation)
    Password manager entry
    Secure note shared verbally
    Encrypted file (temporary)
    One-time secure message

Not Acceptable
    Slack / Teams plaintext
    Email
    Hard-coding in Terraform repos
    Screenshots

ğŸ“Œ Process discipline is part of the grade.

ğŸ”§ High-Level Build Steps (No Code Yet)
Step 1 â€” AWS Tokyo
    Confirm Transit Gateway exists
    Create Site-to-Site VPN attached to TGW
    Enable dynamic routing (BGP)
    Configure:
      Local ASN (AWS side)
      BGP peer IPs (169.254.12.x)
      Two tunnels for HA
    Export:
      Tunnel outside IPs
      BGP inside IPs
      ASN
      PSKs

Step 2 â€” GCP Iowa
    Create HA VPN gateway
    Create Cloud Router
    Enable BGP
    Configure:
      Peer ASN
      Link-local IPs
      Matching PSKs
    Attach VPN to Network Connectivity Center
    Advertise GCP VPC CIDR

Step 3 â€” Routing Validation
    Confirm:
      AWS sees GCP routes
      GCP sees Tokyo routes
      No extra CIDRs exchanged

âœ… What Students Must Prove (Deliverables)
ğŸ“¦ Deliverable 1 â€” Connectivity Evidence
Submit screenshots or CLI output showing:
    BGP session Established
    Routes learned on both sides
    Only approved CIDRs exchanged

ğŸ“¦ Deliverable 2 â€” Network Diagram
A simple diagram showing:
    AWS TGW
    VPN tunnels
    GCP HA VPN
    Cloud Router
    CIDR flow direction

Clarity > artwork.

ğŸ“¦ Deliverable 3 â€” Process Write-Up (Short)
Answer in 6â€“10 sentences:
    How PSKs were generated
    How they were shared
    Why this matters in regulated environments

ğŸ“¦ Deliverable 4 â€” Compliance Statement
One paragraph explaining:
    Why no data is stored in GCP
    Why this satisfies Japanese privacy requirements
    Why â€œmulti-cloudâ€ does not mean â€œmulti-storageâ€

ğŸ“ Why This Lab Matters for Your Career
This lab teaches you to:
    Work across providers
    Coordinate between teams
    Respect legal boundaries
    Treat networking as shared responsibility
    Value process as much as code

Many engineers can configure VPNs.
Few can do it cleanly, safely, and defensibly.
      
ğŸ—£ï¸ Interview Talk Track (Practice This)

  â€œWe connected a GCP-based medical branch to AWS using IPSec VPN and BGP, while ensuring all PHI remained in Japan.
  The GCP side ran compute only, and routing was tightly controlled to meet compliance requirements.â€

That answer signals real-world readiness.
        
ğŸ§  One Sentence to Remember
Secure connectivity is as much about process as it is about packets.
